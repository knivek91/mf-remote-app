import{b as e,p as U,z as Y,n as w,v as G,R as J,C as Q}from"./resizeObserver-DlKPDhmr.js";const C=Symbol.for("vuetify:layout"),ee=Symbol.for("vuetify:layout-item"),E=1e3,ae=U({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout");function se(){const i=e.inject(C);if(!i)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:i.getLayoutItem,mainRect:i.mainRect,mainStyles:i.mainStyles}}const te=(i,d,y,r)=>{let u={top:0,left:0,right:0,bottom:0};const c=[{id:"",layer:{...u}}];for(const v of i){const f=d.get(v),g=y.get(v),$=r.get(v);if(!f||!g||!$)continue;const h={...u,[f.value]:parseInt(u[f.value],10)+($.value?parseInt(g.value,10):0)};c.push({id:v,layer:h}),u=h}return c};function ue(i){const d=e.inject(C,null),y=e.computed(()=>d?d.rootZIndex.value-100:E),r=e.ref([]),u=e.reactive(new Map),c=e.reactive(new Map),v=e.reactive(new Map),f=e.reactive(new Map),g=e.reactive(new Map),{resizeRef:$,contentRect:h}=Y(),Z=e.computed(()=>{const o=new Map,s=i.overlaps??[];for(const t of s.filter(a=>a.includes(":"))){const[a,n]=t.split(":");if(!r.value.includes(a)||!r.value.includes(n))continue;const m=u.get(a),p=u.get(n),z=c.get(a),S=c.get(n);!m||!p||!z||!S||(o.set(n,{position:m.value,amount:parseInt(z.value,10)}),o.set(a,{position:p.value,amount:-parseInt(S.value,10)}))}return o}),x=e.computed(()=>{const o=[...new Set([...v.values()].map(t=>t.value))].sort((t,a)=>t-a),s=[];for(const t of o){const a=r.value.filter(n=>v.get(n)?.value===t);s.push(...a)}return te(s,u,c,f)}),V=e.computed(()=>!Array.from(g.values()).some(o=>o.value)),b=e.computed(()=>x.value[x.value.length-1].layer),K=e.toRef(()=>({"--v-layout-left":w(b.value.left),"--v-layout-right":w(b.value.right),"--v-layout-top":w(b.value.top),"--v-layout-bottom":w(b.value.bottom),...V.value?void 0:{transition:"none"}})),I=e.computed(()=>x.value.slice(1).map((o,s)=>{let{id:t}=o;const{layer:a}=x.value[s],n=c.get(t),m=u.get(t);return{id:t,...a,size:Number(n.value),position:m.value}})),P=o=>I.value.find(s=>s.id===o),N=G("createLayout"),A=e.shallowRef(!1);e.onMounted(()=>{A.value=!0}),e.provide(C,{register:(o,s)=>{let{id:t,order:a,position:n,layoutSize:m,elementSize:p,active:z,disableTransitions:S,absolute:k}=s;v.set(t,a),u.set(t,n),c.set(t,m),f.set(t,z),S&&g.set(t,S);const H=J(ee,N?.vnode).indexOf(o);H>-1?r.value.splice(H,0,t):r.value.push(t);const T=e.computed(()=>I.value.findIndex(R=>R.id===t)),L=e.computed(()=>y.value+x.value.length*2-T.value*2),q=e.computed(()=>{const R=n.value==="left"||n.value==="right",_=n.value==="right",D=n.value==="bottom",M=p.value??m.value,F=M===0?"%":"px",j={[n.value]:0,zIndex:L.value,transform:`translate${R?"X":"Y"}(${(z.value?0:-(M===0?100:M))*(_||D?-1:1)}${F})`,position:k.value||y.value!==E?"absolute":"fixed",...V.value?void 0:{transition:"none"}};if(!A.value)return j;const l=I.value[T.value];l||Q(`[Vuetify] Could not find layout item "${t}"`);const O=Z.value.get(t);return O&&(l[O.position]+=O.amount),{...j,height:R?`calc(100% - ${l.top}px - ${l.bottom}px)`:p.value?`${p.value}px`:void 0,left:_?void 0:`${l.left}px`,right:_?`${l.right}px`:void 0,top:n.value!=="bottom"?`${l.top}px`:void 0,bottom:n.value!=="top"?`${l.bottom}px`:void 0,width:R?p.value?`${p.value}px`:void 0:`calc(100% - ${l.left}px - ${l.right}px)`}}),B=e.computed(()=>({zIndex:L.value-1}));return{layoutItemStyles:q,layoutItemScrimStyles:B,zIndex:L}},unregister:o=>{v.delete(o),u.delete(o),c.delete(o),f.delete(o),g.delete(o),r.value=r.value.filter(s=>s!==o)},mainRect:b,mainStyles:K,getLayoutItem:P,items:I,layoutRect:h,rootZIndex:y});const W=e.toRef(()=>["v-layout",{"v-layout--full-height":i.fullHeight}]),X=e.toRef(()=>({zIndex:d?y.value:void 0,position:d?"relative":void 0,overflow:d?"hidden":void 0}));return{layoutClasses:W,layoutStyles:X,getLayoutItem:P,items:I,layoutRect:h,layoutRef:$}}export{ue as c,ae as m,se as u};
